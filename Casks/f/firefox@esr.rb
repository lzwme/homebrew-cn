cask "firefox@esr" do
  version "128.3.1"

  language "af" do
    sha256 "5268b5f1ae81fe1e24bfea42773ba69a0d96e3fdfde6b4e602669d187affaf03"
    "af"
  end
  language "ar" do
    sha256 "eb047741e82ea8f56aca09fc7d01f0184428ef17c8951c54ace0530b95714249"
    "ar"
  end
  language "be" do
    sha256 "9ec24f6fcbf0e27710f1701454018a48af270b2832f51afc50bbde07e4cafd2c"
    "be"
  end
  language "bg" do
    sha256 "d996713eee6135d6c2c18e1841325b0e4a9cda8eba11f22b417970fc6fa49cdd"
    "bg"
  end
  language "bn" do
    sha256 "60d48fdb3aebc1b5ff24490fd450348ddbf1a8ed679818993fcf0ca1689fee7f"
    "bn"
  end
  language "ca" do
    sha256 "7e568c01123b9dc13be1797f94d7fba0b110be330e15fde32169494709caa10b"
    "ca"
  end
  language "cs" do
    sha256 "b33e8f40ec90318e057e9f713a6a718a3ca516c2a355a587d8b43421722ef8a1"
    "cs"
  end
  language "de" do
    sha256 "ee5d1c0f30012a4697eb7841417edef8efb975a32a724e716027f4dae4470008"
    "de"
  end
  language "en-CA" do
    sha256 "9b45da95fb79a4871950e27cd6047df795453763439df0b0b253fbab4badf0ec"
    "en-CA"
  end
  language "en-GB" do
    sha256 "0a138c401da4c1120414da4f3b6eadb67448c119278dfdbed1cb35e6cd7271bd"
    "en-GB"
  end
  language "en", default: true do
    sha256 "81a0b8bd9ed1307c4653137c3590d308cf37099a740674199b52fde0b2baed4a"
    "en-US"
  end
  language "eo" do
    sha256 "b5528eb4e046c6f71503af497f2b7d69b2928d150459694f39a8323195e3823e"
    "eo"
  end
  language "es-AR" do
    sha256 "d4a7b2a0025651668119ae5d8433c2be7ebc803c637475960e7272bd415432f5"
    "es-AR"
  end
  language "es-CL" do
    sha256 "719b95e6eed0c8ff648bdecddc7f0f33798c106084700aed6c6e49555841a428"
    "es-CL"
  end
  language "es-ES" do
    sha256 "c10b716af089db30d044e156f35380861cac23baab2431c18c7151027a8d9cb6"
    "es-ES"
  end
  language "fa" do
    sha256 "8baca266660e08d122600d3cf41498d247a63f826d662286723acdd66df47549"
    "fa"
  end
  language "ff" do
    sha256 "c15bdf1d6fbef3943d565813f4cd980760425934ed30e67234cca8c2e866131d"
    "ff"
  end
  language "fi" do
    sha256 "58e721fffd0d461ae8b526ae62b8361c8e7a81e436d23c5361c95b8f84706860"
    "fi"
  end
  language "fr" do
    sha256 "57564e0de6763b60589f0824970cab3ea2e09eb99de80b0fd41c96c21c60ce65"
    "fr"
  end
  language "gl" do
    sha256 "f8b21b5a2e6c0e5f964a06a7ab6c714d41024d252a4ef0f761fa07cf2f97af7a"
    "gl"
  end
  language "gn" do
    sha256 "713377879d3dfbe73cbb865eff61dfd87f7535ce689b6e3a2e03d94edfc81e3a"
    "gn"
  end
  language "gu" do
    sha256 "87c602e0c1440860f2801762071de7f1097c4739d0d192e96d3c004dce1b4770"
    "gu-IN"
  end
  language "he" do
    sha256 "069b5072b48aa1c5be8b0cebf937ee1e10539f3afc913ba15a1b824c0ea185d4"
    "he"
  end
  language "hi" do
    sha256 "7927c51d37214bab82cfb9ccd7b1631ae15fff6cf3237f1908090935127be123"
    "hi-IN"
  end
  language "in" do
    sha256 "7927c51d37214bab82cfb9ccd7b1631ae15fff6cf3237f1908090935127be123"
    "hi-IN"
  end
  language "it" do
    sha256 "e25fde26bc4b18981b40d3aecd7be754318f309be5ee1f030d54a8b6559443e8"
    "it"
  end
  language "ja" do
    sha256 "f3a4ca31f4807d0d5e02cdbf2151b794f7316e8e1e49a5260b76efc3b90fdc5f"
    "ja-JP-mac"
  end
  language "ka" do
    sha256 "ae13e2e621e3620007538dc5752295d9ed293829817f623801cf06cc629616bc"
    "ka"
  end
  language "ko" do
    sha256 "93da0e1fbcda2c1b44dc5e34fc296ee16f67579cbd74b9380478cf85c2baaf80"
    "ko"
  end
  language "mr" do
    sha256 "a535f880e144c6b9cc996f556c232efd5e381d2fbe669317cbe73c9b4a21cbe9"
    "mr"
  end
  language "my" do
    sha256 "079857312ba0a3f6fb3dd72157d159f2501a5cb6ce113828d316ceb9d42108ed"
    "my"
  end
  language "ne" do
    sha256 "cdd71eb3835dbca3bc19a029129d5f17eb83bce5a810ba0e187bf32461b740d1"
    "ne-NP"
  end
  language "nl" do
    sha256 "34a8f86359f193d0c60839648855ae05c84e89c40464c7504b00d35d2a19915e"
    "nl"
  end
  language "pa-IN" do
    sha256 "6ff9ec52a0554e6c1b8b980e6ed46a157eb39a831b3839842dcb77ada27e2c76"
    "pa-IN"
  end
  language "pl" do
    sha256 "35855b48c0fa8d93e61a99efe225935e8168b35c4c6ac08ad522a9164d03d3cb"
    "pl"
  end
  language "pt-BR" do
    sha256 "08725facb3e415e5322bc2810800461b4f685397e6b9174998783982e8a58a5f"
    "pt-BR"
  end
  language "pt" do
    sha256 "a01395ffcbc61f4746ad7f2471cc3dcfac1cda8c437d8fac173c832869930f06"
    "pt-PT"
  end
  language "ru" do
    sha256 "43e71c6af8f0662be25dbf96fdc513b7c50f2b236c5f386c8417561883c8a3da"
    "ru"
  end
  language "si" do
    sha256 "0d5c4cc09308a7c1880144367680d6e17da8a87b1b73d69314808ffc4c717a60"
    "si"
  end
  language "sq" do
    sha256 "06f1de4c7fe078577efb05ebb7a9eebeabb8ace435a6ec9abf2e057563e7f469"
    "sq"
  end
  language "sr" do
    sha256 "e8ff0a3f61fd2793a73a9dff074ccd1094419e9bfeb4b8d28ccdca8fcb46a3a6"
    "sr"
  end
  language "sv" do
    sha256 "62efeca0ab581489a4128905eff3bd58fbc817c27dbf73ddb3f4984c10f5b23a"
    "sv-SE"
  end
  language "ta" do
    sha256 "8822937a0ba2a43bbb4789ac47b05bdd91c1737e30f93d9658ace2a99a9c5eb2"
    "ta"
  end
  language "te" do
    sha256 "033ba85e55105c711e1a1e1b7478315114dae956d719202ce7bb375adcea9937"
    "te"
  end
  language "th" do
    sha256 "38a777b30c1ec53f914aa9bd59fedca48d53a2252ec928e4bcd4b9e4c8a4c5ab"
    "th"
  end
  language "tl" do
    sha256 "e13e428658c3c3b2d3dc914d1438fc5cb92d0a8281229fe2f34ca0331dd8efb3"
    "tl"
  end
  language "tr" do
    sha256 "3cfd8ebb606a5b632a25ab4e9fb666eacfd3ccc1620efaa0bcd2b9be396bc430"
    "tr"
  end
  language "uk" do
    sha256 "8418e42773d1cb05cf2040ada4135aaf334abfc2780d97f211ace444733b22fb"
    "uk"
  end
  language "ur" do
    sha256 "ce38ae582db8ba85ec5b7d8923ad2df8a5395a02d44168ff51104b9fa5a62484"
    "ur"
  end
  language "zh-TW" do
    sha256 "33e3616288f1f910f86fa427d66f204d450f39f0b5c79f4c5675cc3b5fc5a593"
    "zh-TW"
  end
  language "zh" do
    sha256 "d8a4fe36c23a0951862680d3fa3edd7984e8370a9cb5ac4d4b5f408011ca8117"
    "zh-CN"
  end

  url "https://download-installer.cdn.mozilla.net/pub/firefox/releases/#{version}esr/mac/#{language}/Firefox%20#{version}esr.dmg",
      verified: "download-installer.cdn.mozilla.net/pub/firefox/releases/"
  name "Mozilla Firefox ESR"
  name "Mozilla Firefox Extended Support Release"
  desc "Web browser"
  homepage "https://www.mozilla.org/en-US/firefox/all/#product-desktop-esr"

  livecheck do
    url "https://product-details.mozilla.org/1.0/firefox_versions.json"
    regex(/v?(\d+(?:\.\d+)+)/i)
    strategy :json do |json, regex|
      match = json["FIREFOX_ESR"]&.match(regex)
      next if match.blank?

      match[1]
    end
  end

  auto_updates true
  conflicts_with cask: [
    "firefox",
    "firefox@beta",
    "firefox@cn",
  ]
  depends_on macos: ">= :catalina"

  app "Firefox.app"

  uninstall quit:   "org.mozilla.firefox",
            delete: "/Library/Logs/DiagnosticReports/firefox_*"

  zap trash: [
        "~/Library/Application Support/com.apple.sharedfilelist/com.apple.LSSharedFileList.ApplicationRecentDocuments/org.mozilla.firefox.sfl*",
        "~/Library/Application Support/CrashReporter/firefox_*",
        "~/Library/Application Support/Firefox",
        "~/Library/Caches/Firefox",
        "~/Library/Caches/Mozilla/updates/Applications/Firefox",
        "~/Library/Caches/org.mozilla.crashreporter",
        "~/Library/Caches/org.mozilla.firefox",
        "~/Library/Preferences/org.mozilla.crashreporter.plist",
        "~/Library/Preferences/org.mozilla.firefox.plist",
        "~/Library/Saved Application State/org.mozilla.firefox.savedState",
        "~/Library/WebKit/org.mozilla.firefox",
      ],
      rmdir: [
        "~/Library/Application Support/Mozilla", #  May also contain non-Firefox data
        "~/Library/Caches/Mozilla",
        "~/Library/Caches/Mozilla/updates",
        "~/Library/Caches/Mozilla/updates/Applications",
      ]
end