cask "firefox@esr" do
  version "128.5.1"

  language "af" do
    sha256 "4c01b2b190166a73a9d29ae0ca8b23476cf3f275c0d09d2871c7f4356afccde9"
    "af"
  end
  language "ar" do
    sha256 "05e7a6303151c0ec20203b381bf135c62d8da8ff88338228270158a7a7181e9b"
    "ar"
  end
  language "be" do
    sha256 "c1840ced21a0575029d7020bcc3e5e4d541534de0c535ae2c0fed9a33a63740e"
    "be"
  end
  language "bg" do
    sha256 "4941be1ead1210a787f6781361990397136836bd45eb00449f795b7161196db4"
    "bg"
  end
  language "bn" do
    sha256 "3fad663f7138dfbc532801f4c82da001f3c8ec8a729a00135b7c8c3a9895b5c6"
    "bn"
  end
  language "ca" do
    sha256 "671d0c94150998286896f218b4714cba0c344704aa5dcb51e1511473cbfa920d"
    "ca"
  end
  language "cs" do
    sha256 "0cfa29d0c5e494089721344b86b30aa845644ab6b06c047d8da170969e05d4de"
    "cs"
  end
  language "de" do
    sha256 "3db4f4866ef29c491371714a3fcbfa962a621b5dbcfe401696d24715479311e5"
    "de"
  end
  language "en-CA" do
    sha256 "3f9848bbb250713af817920b1d80cf2dc541d3e5735e5e644b7eb9d37105002f"
    "en-CA"
  end
  language "en-GB" do
    sha256 "a0e6dcd16790899ae2b8474e4a84a1f8889350a42d9708dc7144df8579d2451d"
    "en-GB"
  end
  language "en", default: true do
    sha256 "53dff12356a02565ef796f0e3ea59971493ef64430a8d3588a618b18b4a0348d"
    "en-US"
  end
  language "eo" do
    sha256 "23b13982ec4fd0850f3b683ae69a8960960677238580f02514c4d3f6227c78ed"
    "eo"
  end
  language "es-AR" do
    sha256 "5e2682d8c486684600c2b25784dd91aacc1530116c029cb4796069054ccd14e3"
    "es-AR"
  end
  language "es-CL" do
    sha256 "f995701864452fa63f8521ab588b899a82964a63fb3b952771a064cb87b9b0c9"
    "es-CL"
  end
  language "es-ES" do
    sha256 "1edf7c9463e93421b733528551b4e32fc2997ac76f4d360b777032acfadbaa1e"
    "es-ES"
  end
  language "fa" do
    sha256 "daa045f441f5e975e4ea9f6fa731952fe44595babb006acbcd6b178b18a07507"
    "fa"
  end
  language "ff" do
    sha256 "b40db6a9db49a4788573c2c53e278256a470e6bbc7816d07a9d14afac1a69cdb"
    "ff"
  end
  language "fi" do
    sha256 "cb427a429c33a68b0855a093e324ecc101adda08480e88af499b8f7e31719844"
    "fi"
  end
  language "fr" do
    sha256 "9f853e05cf1e2d2543134ca915bc5b57e3ead02b320539051c8d037ad22307ac"
    "fr"
  end
  language "gl" do
    sha256 "93160d392151fe0f09ef0b7c2c55fac5e54c729e3bb9a28b56665edb6555a7d0"
    "gl"
  end
  language "gn" do
    sha256 "0ddd8b9006bdbb76d7cf9f0af102c35c30045574ba0b41e07a8118b84204d05f"
    "gn"
  end
  language "gu" do
    sha256 "32d1e59d3ade2633045a83f868cfeb5a494abd0a2b3246977cec46f33b60ec0b"
    "gu-IN"
  end
  language "he" do
    sha256 "7cd29507c13efc04a462083f1914dbc5d4f97cecdc42aeaeaf50f5d7791ef301"
    "he"
  end
  language "hi" do
    sha256 "e71da98522888e7ead050b2032fdadc9e476bc38847569e52a56d8147bbe999c"
    "hi-IN"
  end
  language "in" do
    sha256 "e71da98522888e7ead050b2032fdadc9e476bc38847569e52a56d8147bbe999c"
    "hi-IN"
  end
  language "it" do
    sha256 "1dae182ee938c69820db58233a49a6ec168fc669fe55ad177656fa120eecbbeb"
    "it"
  end
  language "ja" do
    sha256 "48c83ab97f79d261965e8b11c48c92577f7bcc887f111704d766c6d58afa586a"
    "ja-JP-mac"
  end
  language "ka" do
    sha256 "ebf99251bf7f58efc40c192e7efeb458c7e57b80b1c7bd6b4d2d954374044f4d"
    "ka"
  end
  language "ko" do
    sha256 "fb59bb432a072b7cafbe4a635e94daa15f69536fece9f8228f90fe134b7dd8ca"
    "ko"
  end
  language "mr" do
    sha256 "c7565077b5fc923ebea3922ad6cd30ce327625400993ed095372d21e1c50da3c"
    "mr"
  end
  language "my" do
    sha256 "6683b7ff0914defb625a13e2d720c633010acd7958734b2c74f04036282de01e"
    "my"
  end
  language "ne" do
    sha256 "69b07cd1affdc8077df542dd77d45cbc20482619cac960fa55ef9d584df045c0"
    "ne-NP"
  end
  language "nl" do
    sha256 "4d3408d1012641d04af6e46519a4d56766f6ea05d7a2f7d9ab1f9e47d73c81dd"
    "nl"
  end
  language "pa-IN" do
    sha256 "851082f4a250fb464cb028dd554eab2c9d0d3bd8af309f14dd2a6d982c7b4e94"
    "pa-IN"
  end
  language "pl" do
    sha256 "083edaa47e64231e194c92ba82bfa79655f73c23f92feda4c4be718f6a22f177"
    "pl"
  end
  language "pt-BR" do
    sha256 "c3750a069e535bd226b8e0cee2856b10ddc850a505647f342ed3b9f5323b2ad2"
    "pt-BR"
  end
  language "pt" do
    sha256 "9b49c5e00a76855cbfd2570849a2f21fa2c2c07f8109cdbe87e647be788c490a"
    "pt-PT"
  end
  language "ru" do
    sha256 "b3c1403b2d501fb22147647468757739df6d5cbf17682be3f1953cb103ef18ac"
    "ru"
  end
  language "si" do
    sha256 "6cff7839582bdb81be5279324c8c8058a5e4d35c31fb355727f64416b55b369b"
    "si"
  end
  language "sq" do
    sha256 "36b0205ab86eae59c81bd18ec0505a72e013d93d3eefe9d152497e7b1a937960"
    "sq"
  end
  language "sr" do
    sha256 "86f525cc15842b481f5a5de5101b40fbea0017dab112ce6045fc0c995beb16f9"
    "sr"
  end
  language "sv" do
    sha256 "9aec4d1104420c203e41f204b99614ff57a0b23aa8013d20f7b8b33588e9be33"
    "sv-SE"
  end
  language "ta" do
    sha256 "a88971907f6941cbb414cb001224b1dc6fb151916a204e17cbec68520460db80"
    "ta"
  end
  language "te" do
    sha256 "268d1df2fd75de5ebb0c22e4c943aae67afafb45c84c1540408919acd84b3cd7"
    "te"
  end
  language "th" do
    sha256 "f8adc4d021852c156738e4100bbc86f7b360b814121a6df09135195b7f0bb9d2"
    "th"
  end
  language "tl" do
    sha256 "392949de30357ab936350e9748c8bf1665c2f7893026ac8f7881fa860609ba2e"
    "tl"
  end
  language "tr" do
    sha256 "c1d806eafdadda515bd7372c1d0c28f820fdcf7dd22c2643081e66c8d0ec6bd0"
    "tr"
  end
  language "uk" do
    sha256 "6176c42eca7987e9456f9212db5885dfd581994b6c2bec56c1524eb64aa34495"
    "uk"
  end
  language "ur" do
    sha256 "6a9cdaef3779dcdf8d6fb29aa8fc6b250afd0035dd83b4edf65c354191829924"
    "ur"
  end
  language "zh-TW" do
    sha256 "1bb423ffd6a85d2c43037b294748590b5805ddb36b66a694d568940782ad9b05"
    "zh-TW"
  end
  language "zh" do
    sha256 "fbea9c0d66b79446d35e2fd8c9c975aaa215e0c30d61f7198213b18bbe3196e8"
    "zh-CN"
  end

  url "https://download-installer.cdn.mozilla.net/pub/firefox/releases/#{version}esr/mac/#{language}/Firefox%20#{version}esr.dmg",
      verified: "download-installer.cdn.mozilla.net/pub/firefox/releases/"
  name "Mozilla Firefox ESR"
  name "Mozilla Firefox Extended Support Release"
  desc "Web browser"
  homepage "https://www.mozilla.org/en-US/firefox/all/#product-desktop-esr"

  livecheck do
    url "https://product-details.mozilla.org/1.0/firefox_versions.json"
    regex(/v?(\d+(?:\.\d+)+)/i)
    strategy :json do |json, regex|
      match = json["FIREFOX_ESR"]&.match(regex)
      next if match.blank?

      match[1]
    end
  end

  auto_updates true
  conflicts_with cask: [
    "firefox",
    "firefox@beta",
    "firefox@cn",
  ]
  depends_on macos: ">= :catalina"

  app "Firefox.app"

  uninstall quit:   "org.mozilla.firefox",
            delete: "/Library/Logs/DiagnosticReports/firefox_*"

  zap trash: [
        "~/Library/Application Support/com.apple.sharedfilelist/com.apple.LSSharedFileList.ApplicationRecentDocuments/org.mozilla.firefox.sfl*",
        "~/Library/Application Support/CrashReporter/firefox_*",
        "~/Library/Application Support/Firefox",
        "~/Library/Caches/Firefox",
        "~/Library/Caches/Mozilla/updates/Applications/Firefox",
        "~/Library/Caches/org.mozilla.crashreporter",
        "~/Library/Caches/org.mozilla.firefox",
        "~/Library/Preferences/org.mozilla.crashreporter.plist",
        "~/Library/Preferences/org.mozilla.firefox.plist",
        "~/Library/Saved Application State/org.mozilla.firefox.savedState",
        "~/Library/WebKit/org.mozilla.firefox",
      ],
      rmdir: [
        "~/Library/Application Support/Mozilla", #  May also contain non-Firefox data
        "~/Library/Caches/Mozilla",
        "~/Library/Caches/Mozilla/updates",
        "~/Library/Caches/Mozilla/updates/Applications",
      ]
end